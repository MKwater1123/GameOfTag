# ðŸŽ® GPS Tag ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ«

## ðŸ“ åŸºæœ¬è¨­å®š

### ã‚¨ãƒªã‚¢è¨­å®š
- **ä¸­å¿ƒåœ°ç‚¹**: é¹¿å…å³¶å·¥æ¥­é«˜ç­‰å°‚é–€å­¦æ ¡
  - ç·¯åº¦: 31.731222
  - çµŒåº¦: 130.728778
- **ã‚¨ãƒªã‚¢åŠå¾„**: 1000ãƒ¡ãƒ¼ãƒˆãƒ«ï¼ˆ1kmï¼‰
- **ã‚¨ãƒªã‚¢å¤–ãƒšãƒŠãƒ«ãƒ†ã‚£**: ç”»é¢ã«è­¦å‘Šè¡¨ç¤º + ãƒã‚¤ãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

---

## ðŸ‘¥ å½¹å‰²ã¨ãƒ«ãƒ¼ãƒ«

### ðŸ”´ é¬¼ (Oni)
**ç›®çš„**: é€ƒèµ°è€…ã‚’è¦‹ã¤ã‘ã¦æ•ã¾ãˆã‚‹

**ã§ãã‚‹ã“ã¨**:
- âœ… å…¨ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ä½ç½®ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ç¢ºèªã§ãã‚‹
- âœ… è‡ªåˆ†ã®ä½ç½®ã¯5ç§’ã”ã¨ã«è‡ªå‹•é€ä¿¡ã•ã‚Œã‚‹
- âœ… ä»–ã®é¬¼ã®ä½ç½®ã‚‚è¦‹ãˆã‚‹ï¼ˆèµ¤ãƒžãƒ¼ã‚«ãƒ¼ï¼‰
- âœ… é€ƒèµ°è€…ã®æœ€çµ‚ä½ç½®ãŒè¦‹ãˆã‚‹ï¼ˆé’ãƒžãƒ¼ã‚«ãƒ¼ï¼‰
  - â€»é€ƒèµ°è€…ã®ä½ç½®ã¯æœ€å¤§30ç§’å‰ã®æƒ…å ±

**åˆ¶é™**:
- âŒ ãªã—ï¼ˆå¸¸ã«å…¨å“¡ã®ä½ç½®ãŒåˆ†ã‹ã‚‹ï¼‰

### ðŸ”µ é€ƒèµ°è€… (Runner)
**ç›®çš„**: é¬¼ã‹ã‚‰é€ƒã’åˆ‡ã‚‹

**ã§ãã‚‹ã“ã¨**:
- âœ… ä»–ã®é€ƒèµ°è€…ã®ä½ç½®ã‚’ç¢ºèªã§ãã‚‹ï¼ˆé’ãƒžãƒ¼ã‚«ãƒ¼ï¼‰
- âœ… è‡ªåˆ†ã®ä½ç½®ã¯30ç§’ã«1å›žã ã‘é€ä¿¡ã•ã‚Œã‚‹

**åˆ¶é™**:
- âŒ é¬¼ã®ä½ç½®ã¯è¦‹ãˆãªã„
- âŒ ä½ç½®æƒ…å ±ã®é€ä¿¡ã¯30ç§’ã«1å›žã®ã¿
- ðŸ“Š æ¬¡ã®é€ä¿¡ã¾ã§ã®ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹

---

## ðŸ—ºï¸ ãƒžãƒ¼ã‚«ãƒ¼ã®è‰²åˆ†ã‘

| è‰² | æ„å‘³ |
|:---:|:---|
| ðŸŸ¢ **ç·‘** | è‡ªåˆ†ã®ç¾åœ¨ä½ç½® |
| ðŸ”´ **èµ¤** | ä»–ã®é¬¼ã®ä½ç½® |
| ðŸ”µ **é’** | ä»–ã®é€ƒèµ°è€…ã®ä½ç½® |

---

## âš™ï¸ æŠ€è¡“ä»•æ§˜

### ä½ç½®æƒ…å ±æ›´æ–°é »åº¦
- **é¬¼**: 5ç§’ã”ã¨ã«è‡ªå‹•é€ä¿¡
- **é€ƒèµ°è€…**: 30ç§’ã”ã¨ã«é€ä¿¡ï¼ˆãƒ†ã‚¹ãƒˆç”¨è¨­å®šï¼‰
  - â€»æœ¬ç•ªã§ã¯10åˆ†ã«å¤‰æ›´å¯èƒ½

### ä½ç½®æƒ…å ±ã®ç²¾åº¦
- GPS + Wi-Fi/ãƒ¢ãƒã‚¤ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«ã‚ˆã‚‹æ¸¬ä½
- é«˜ç²¾åº¦ãƒ¢ãƒ¼ãƒ‰æœ‰åŠ¹

### ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜æœŸé–“
- Firebase Realtime Databaseã«ä¿å­˜
- ã‚²ãƒ¼ãƒ çµ‚äº†å¾Œã‚‚å±¥æ­´ã¨ã—ã¦æ®‹ã‚‹

---

## ðŸŽ¯ å‹åˆ©æ¡ä»¶ï¼ˆä»Šå¾Œå®Ÿè£…äºˆå®šï¼‰

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³1: æ™‚é–“åˆ¶é™
- åˆ¶é™æ™‚é–“å†…ã«é¬¼ãŒé€ƒèµ°è€…ã‚’æ•ã¾ãˆã‚‰ã‚Œãªã‘ã‚Œã°é€ƒèµ°è€…ã®å‹ã¡
- ä¾‹: 30åˆ†ã€60åˆ†ãªã©

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³2: æ•æ‰åˆ¤å®š
- é¬¼ã¨é€ƒèµ°è€…ã®è·é›¢ãŒä¸€å®šç¯„å›²å†…ï¼ˆä¾‹: 10mï¼‰ã«ãªã£ãŸã‚‰æ•ç²
- å…¨é€ƒèµ°è€…ã‚’æ•ã¾ãˆãŸã‚‰é¬¼ã®å‹ã¡

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³3: ãƒã‚¤ãƒ³ãƒˆåˆ¶
- ä¸€å®šæ™‚é–“é€ƒã’åˆ‡ã‚‹ã”ã¨ã«ãƒã‚¤ãƒ³ãƒˆç²å¾—
- æ•ã¾ãˆã‚‹ã¨ãƒã‚¤ãƒ³ãƒˆç²å¾—

---

## ðŸ“± ä½¿ã„æ–¹

### 1. ã‚²ãƒ¼ãƒ é–‹å§‹
1. ã‚¢ãƒ—ãƒªã«ã‚¢ã‚¯ã‚»ã‚¹
2. åå‰ã‚’å…¥åŠ›ï¼ˆåœ°å›³ä¸Šã«è¡¨ç¤ºã•ã‚Œã‚‹ï¼‰
3. ã€Œé¬¼ã§å‚åŠ ã€ã¾ãŸã¯ã€Œé€ƒèµ°è€…ã§å‚åŠ ã€ã‚’é¸æŠž
4. ä½ç½®æƒ…å ±ã®è¨±å¯ã‚’æ‰¿èª

### 2. ãƒ—ãƒ¬ã‚¤ä¸­
- **é¬¼**: åœ°å›³ã‚’è¦‹ãªãŒã‚‰é€ƒèµ°è€…ã‚’è¿½è·¡
- **é€ƒèµ°è€…**: 30ç§’ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ã‚’ç¢ºèªã—ãªãŒã‚‰ç§»å‹•
- **å…¨å“¡**: ã‚¨ãƒªã‚¢å¤–ã«å‡ºãªã„ã‚ˆã†æ³¨æ„

### 3. ä½ç½®æƒ…å ±ã®ç¢ºèª
- ãƒžãƒ¼ã‚«ãƒ¼ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨è©³ç´°æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã‚‹
  - ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å
  - å½¹å‰²ï¼ˆé¬¼/é€ƒèµ°è€…ï¼‰
  - æœ€çµ‚æ›´æ–°æ™‚åˆ»

---

## âš ï¸ æ³¨æ„äº‹é …

### å®‰å…¨é¢
- ðŸš— **å‘¨å›²ã®å®‰å…¨ã‚’ç¢ºèª**: é“è·¯ã‚„å±é™ºãªå ´æ‰€ã«æ³¨æ„
- ðŸ‘€ **ã‚¹ãƒžãƒ›ã‚’è¦‹ãªãŒã‚‰ã®æ­©è¡Œç¦æ­¢**: ç«‹ã¡æ­¢ã¾ã£ã¦ç¢ºèª
- ðŸŒ™ **å¤œé–“ãƒ—ãƒ¬ã‚¤ã¯é¿ã‘ã‚‹**: æ˜Žã‚‹ã„æ™‚é–“å¸¯ã«å®Ÿæ–½
- ðŸ‘¥ **è¤‡æ•°äººã§**: å˜ç‹¬è¡Œå‹•ã‚’é¿ã‘ã‚‹

### æŠ€è¡“é¢
- ðŸ“± **ãƒãƒƒãƒ†ãƒªãƒ¼**: GPSå¸¸æ™‚ä½¿ç”¨ã§ãƒãƒƒãƒ†ãƒªãƒ¼æ¶ˆè²»å¤§
- ðŸ“¶ **é€šä¿¡ç’°å¢ƒ**: ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæŽ¥ç¶šå¿…é ˆ
- ðŸ”’ **ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼**: ä½ç½®æƒ…å ±ãŒä»–ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«å…±æœ‰ã•ã‚Œã‚‹

### ãƒ«ãƒ¼ãƒ«
- ðŸš« **ã‚¨ãƒªã‚¢å¤–ã«å‡ºãªã„**: è­¦å‘ŠãŒå‡ºãŸã‚‰ã™ãã«ã‚¨ãƒªã‚¢å†…ã¸
- ðŸŽ® **ãƒ•ã‚§ã‚¢ãƒ—ãƒ¬ã‚¤**: ä½ç½®æƒ…å ±ã‚’å½è£…ã—ãªã„
- ðŸ¤ **ãƒžãƒŠãƒ¼ã‚’å®ˆã‚‹**: ç§æœ‰åœ°ã¸ã®ä¾µå…¥ç¦æ­¢

---

## ðŸ”§ ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚ºå¯èƒ½ãªè¨­å®š

é–‹ç™ºè€…å‘ã‘ï¼ˆ`js/app.js`ã‚’ç·¨é›†ï¼‰ï¼š

```javascript
// ã‚¨ãƒªã‚¢è¨­å®š
const GAME_SETTINGS = {
    center_lat: 31.731222,    // ä¸­å¿ƒç·¯åº¦
    center_lng: 130.728778,   // ä¸­å¿ƒçµŒåº¦
    radius_meter: 1000        // åŠå¾„ï¼ˆãƒ¡ãƒ¼ãƒˆãƒ«ï¼‰
};

// ä½ç½®é€ä¿¡é »åº¦
const ONI_SEND_INTERVAL_MS = 5 * 1000;      // é¬¼: 5ç§’
const RUNNER_SEND_INTERVAL_MS = 30 * 1000;  // é€ƒèµ°è€…: 30ç§’ï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰
// æœ¬ç•ªã§ã¯ 10 * 60 * 1000 (10åˆ†) ã«å¤‰æ›´å¯èƒ½
```

---

## ðŸ“Š Firebaseè¨­å®š

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«
ç¾åœ¨ã®è¨­å®šï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰ï¼š

```json
{
  "rules": {
    "game_session_v1": {
      "players": {
        ".read": true,
        "$player_id": {
          ".write": true,
          ".validate": "newData.hasChildren(['username', 'role', 'lat', 'lng', 'updated_at']) && 
                        newData.child('username').isString() && 
                        newData.child('username').val().length > 0 && 
                        newData.child('username').val().length <= 20 && 
                        (newData.child('role').val() == 'oni' || newData.child('role').val() == 'runner') && 
                        newData.child('lat').isNumber() && 
                        newData.child('lng').isNumber() && 
                        newData.child('updated_at').isNumber()"
        }
      }
    }
  }
}
```

**åˆ¶é™å†…å®¹**:
- å…¨å“¡ãŒãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æƒ…å ±ã‚’èª­ã¿å–ã‚Šå¯èƒ½
- å„ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸ãè¾¼ã¿å¯èƒ½
- ãƒ‡ãƒ¼ã‚¿å½¢å¼ã®æ¤œè¨¼ã‚ã‚Šï¼ˆåå‰ã€å½¹å‰²ã€ä½ç½®ã€æ™‚åˆ»ï¼‰

---

## ðŸŽ“ æŽ¨å¥¨ãƒ—ãƒ¬ã‚¤ç’°å¢ƒ

### äººæ•°
- **æœ€å°**: 2äººï¼ˆé¬¼1äºº + é€ƒèµ°è€…1äººï¼‰
- **æŽ¨å¥¨**: 4ï½ž10äºº
- **æœ€å¤§**: åˆ¶é™ãªã—ï¼ˆå¤šã™ãŽã‚‹ã¨åœ°å›³ãŒè¦‹ã¥ã‚‰ã„ï¼‰

### å ´æ‰€
- é¹¿å…å³¶é«˜å°‚ã‚­ãƒ£ãƒ³ãƒ‘ã‚¹å‘¨è¾º
- åŠå¾„1kmä»¥å†…ã®ã‚¨ãƒªã‚¢
- éšœå®³ç‰©ã‚„éš ã‚Œå ´æ‰€ãŒã‚ã‚‹å ´æ‰€ãŒé¢ç™½ã„

### æ™‚é–“
- **ãƒ†ã‚¹ãƒˆ**: 5ï½ž10åˆ†
- **æœ¬ç•ª**: 30ï½ž60åˆ†æŽ¨å¥¨

---

## ðŸ“ ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±

- **ç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
- **æœ€çµ‚æ›´æ–°**: 2025-11-22
- **ã‚¨ãƒªã‚¢**: é¹¿å…å³¶é«˜å°‚ä¸­å¿ƒãƒ»åŠå¾„1km
- **æ›´æ–°é–“éš”**: é¬¼5ç§’ã€é€ƒèµ°è€…30ç§’ï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰

---

**æ¥½ã—ã„ã‚²ãƒ¼ãƒ ã‚’ï¼ðŸŽ‰**
